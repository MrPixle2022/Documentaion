# Relations:

---

## One to One:

a `one to one` relationship is a relation where two different rows reference each's primary key, let's say that a person an have one car, and the car can have one owner, so now each person will have a car id and the car will have an owner id.

to get a `one to one` relationship we can use a foreign key with a `UNIQUE` constraint:

```sql
CREATE TABLE things(
    id INTEGER PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    owner_id INTEGER UNIQUE,
    -- one thing will reference one user
    FOREIGN KEY(owner_id) REFERENCES users(id)
);
```

---

## One to Many:

a `one to many` relationship is a relation where one row references another's primary key, but the other one can reference more then one, think a user and their posts, a post can have one writer, but the writer can write many posts.

a one to many is the default we get with foreign keys, say for example:

```sql
CREATE TABLE things(
    id INTEGER PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    owner_id INTEGER,
    -- n number of things could reference the same user
    FOREIGN KEY(owner_id) REFERENCES users(id)
);
```

---

## Many to Many:

a `many to many` relationship is a relation where two rows reference can reference more then one primary key of the other row, think a project and a developer, a project can have many devs and a dev can work on many projects.

to define a `many to many` relationship we usually would have a third-table that acts as a bridge between the two, sometimes it's primary key will be generated by the two foreign keys.

```sql
CREATE TABLE ownership(
  owner INTEGER,
  thing INTEGER,
  FOREIGN KEY(owner) REFERENCES users(id),
  FOREIGN KEY(thing) REFERENCES things(id),
  PRIMARY KEY(owner, thing)
);
```
