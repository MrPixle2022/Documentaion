# Beans

in spring beans are defined as object handled through the `IoC` container -inversion of control-, basically they are objects injected where they are needed.

let's assume we have an functional-interface that sends a message

```java
public interface Message {
    public void send();
}
```

and we have 2 types of message, `whatsapp` and `telegram`, if we use either in the app hard-codded then we decide we want to swap whatsapp with telegram or vice versa we will have to go every where and change it manually, instead we can make use of the fact that both share the same parent type, the `Message` interface and instead inject a `message` type object that we choose if it will be whatsapp or telegram, this is done through `config classes` and `beans`.

beans are useful because they allow you to control instantiation and implementation from one place as well as making it much easier to uint test.

---

## Config classes

create a class -usually under a config package- and annotate it with `@Configuration`, this tills spring it contains beans, inside it create a method annotated with the `@Bean` annotation:

```java
@Configuration
public class MessageConfig {
    @Bean
    public Message message() {
        return new Message() {
            @Override
            public void send() {
                System.out.println("this is by whatsapp");
            }
        };
    }
}
```

now basically we can use this inside any class:

```java
public class SomeClass{
  private Message msg;

  public SomeClass(Message msg){
    this.msg = msg;
  }
}
```

the `Message` object generated by the bean will be injected inside this class.

---

## Components

we can use the `@Component` annotators on a class -not 3rd party- to mark if for scanning, spring will instantiate it and inject where ever it's needed:

```java
@Component
public class EmailMessage{
  public void send(){
    System.out.println("Email sent");
  }
}
```

now this class will be injected:

```java
@RestController
public class EmailController{
  private final EmailMessage em;

  public EmailController(EmailMessage em){
    this.em = em;
  }

  @GetMapping("/send")
  public String send(){
    this.em.send();
    return "done";
  }
}
```

some annotations include the `@Component` such as:

- @Configuration
- @Controller
- @RestController
- @SpringBootApplication
- @Service
- @Repository
- etc...

---

## AutoWired

the `@Autowired` is used on constructors, setters, fields and methods to ask spring to automatically inject the required dependencies, if the beans are not found it throws an error.

the `@Autowired` annotation helps by removing the manual instantiation part and making it easier to test the class.

using this annotation you can basically ignore manually assigning objects via the constructor.
